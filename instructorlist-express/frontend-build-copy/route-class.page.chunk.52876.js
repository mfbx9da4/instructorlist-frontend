webpackJsonp([0],{"0YCM":function(e){e.exports={well:"well__F80wH",wellIcon:"wellIcon__3pUbQ",wellMain:"wellMain__1jOyl",wellDescription:"wellDescription__3BENF",wellAction:"wellAction__12aEo"}},"1uTM":function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(e){return Object.entries(e).filter(function(e){return e[1]}).map(function(e){return e[0]}).join(" ")};t.b=r},"3dZY":function(e){!function(t,n){e.exports=n()}(0,function(){"use strict";var e="millisecond",t="second",n="minute",r="hour",i="day",o="week",a="month",s="quarter",c="year",u=/^(\d{4})-?(\d{1,2})-?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?.?(\d{1,3})?$/,l=/\[([^\]]+)]|Y{2,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,h=function(e,t,n){var r=String(e);return!r||r.length>=t?e:""+Array(t+1-r.length).join(n)+e},d={s:h,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),r=Math.floor(n/60),i=n%60;return(t<=0?"+":"-")+h(r,2,"0")+":"+h(i,2,"0")},m:function(e,t){var n=12*(t.year()-e.year())+(t.month()-e.month()),r=e.clone().add(n,a),i=t-r<0,o=e.clone().add(n+(i?-1:1),a);return Number(-(n+(t-r)/(i?r-o:o-r))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(u){return{M:a,y:c,w:o,d:i,h:r,m:n,s:t,ms:e,Q:s}[u]||String(u||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},f={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},p="en",m={};m[p]=f;var b=function(e){return e instanceof O},y=function(e,t,n){var r;if(!e)return p;if("string"==typeof e)m[e]&&(r=e),t&&(m[e]=t,r=e);else{var i=e.name;m[i]=e,r=i}return n||(p=r),r},v=function(e,t,n){if(b(e))return e.clone();var r=t?"string"==typeof t?{format:t,pl:n}:t:{};return r.date=e,new O(r)},_=d;_.l=y,_.i=b,_.w=function(e,t){return v(e,{locale:t.$L,utc:t.$u})};var O=function(){function h(e){this.$L=this.$L||y(e.locale,null,!0),this.parse(e)}var d=h.prototype;return d.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(_.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var r=t.match(u);if(r)return n?new Date(Date.UTC(r[1],r[2]-1,r[3]||1,r[4]||0,r[5]||0,r[6]||0,r[7]||0)):new Date(r[1],r[2]-1,r[3]||1,r[4]||0,r[5]||0,r[6]||0,r[7]||0)}return new Date(t)}(e),this.init()},d.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},d.$utils=function(){return _},d.isValid=function(){return!("Invalid Date"===this.$d.toString())},d.isSame=function(e,t){var n=v(e);return this.startOf(t)<=n&&n<=this.endOf(t)},d.isAfter=function(e,t){return v(e)<this.startOf(t)},d.isBefore=function(e,t){return this.endOf(t)<v(e)},d.$g=function(e,t,n){return _.u(e)?this[t]:this.set(n,e)},d.year=function(e){return this.$g(e,"$y",c)},d.month=function(e){return this.$g(e,"$M",a)},d.day=function(e){return this.$g(e,"$W",i)},d.date=function(e){return this.$g(e,"$D","date")},d.hour=function(e){return this.$g(e,"$H",r)},d.minute=function(e){return this.$g(e,"$m",n)},d.second=function(e){return this.$g(e,"$s",t)},d.millisecond=function(t){return this.$g(t,"$ms",e)},d.unix=function(){return Math.floor(this.valueOf()/1e3)},d.valueOf=function(){return this.$d.getTime()},d.startOf=function(e,s){var u=this,l=!!_.u(s)||s,h=_.p(e),d=function(e,t){var n=_.w(u.$u?Date.UTC(u.$y,t,e):new Date(u.$y,t,e),u);return l?n:n.endOf(i)},f=function(e,t){return _.w(u.toDate()[e].apply(u.toDate(),(l?[0,0,0,0]:[23,59,59,999]).slice(t)),u)},p=this.$W,m=this.$M,b=this.$D,y="set"+(this.$u?"UTC":"");switch(h){case c:return l?d(1,0):d(31,11);case a:return l?d(1,m):d(0,m+1);case o:var v=this.$locale().weekStart||0,O=(p<v?p+7:p)-v;return d(l?b-O:b+(6-O),m);case i:case"date":return f(y+"Hours",0);case r:return f(y+"Minutes",1);case n:return f(y+"Seconds",2);case t:return f(y+"Milliseconds",3);default:return this.clone()}},d.endOf=function(e){return this.startOf(e,!1)},d.$set=function(o,s){var u,l=_.p(o),h="set"+(this.$u?"UTC":""),d=(u={},u[i]=h+"Date",u.date=h+"Date",u[a]=h+"Month",u[c]=h+"FullYear",u[r]=h+"Hours",u[n]=h+"Minutes",u[t]=h+"Seconds",u[e]=h+"Milliseconds",u)[l],f=l===i?this.$D+(s-this.$W):s;if(l===a||l===c){var p=this.clone().set("date",1);p.$d[d](f),p.init(),this.$d=p.set("date",Math.min(this.$D,p.daysInMonth())).toDate()}else d&&this.$d[d](f);return this.init(),this},d.set=function(e,t){return this.clone().$set(e,t)},d.get=function(e){return this[_.p(e)]()},d.add=function(e,s){var u,l=this;e=Number(e);var h=_.p(s),d=function(t){var n=v(l);return _.w(n.date(n.date()+Math.round(t*e)),l)};if(h===a)return this.set(a,this.$M+e);if(h===c)return this.set(c,this.$y+e);if(h===i)return d(1);if(h===o)return d(7);var f=(u={},u[n]=6e4,u[r]=36e5,u[t]=1e3,u)[h]||1,p=this.valueOf()+e*f;return _.w(p,this)},d.subtract=function(e,t){return this.add(-1*e,t)},d.format=function(e){var t=this;if(!this.isValid())return"Invalid Date";var n=e||"YYYY-MM-DDTHH:mm:ssZ",r=_.z(this),i=this.$locale(),o=this.$H,a=this.$m,s=this.$M,c=i.weekdays,u=i.months,h=function(e,r,i,o){return e&&(e[r]||e(t,n))||i[r].substr(0,o)},d=function(e){return _.s(o%12||12,e,"0")},f=i.meridiem||function(e,t,n){var r=e<12?"AM":"PM";return n?r.toLowerCase():r},p={YY:String(this.$y).slice(-2),YYYY:this.$y,M:s+1,MM:_.s(s+1,2,"0"),MMM:h(i.monthsShort,s,u,3),MMMM:u[s]||u(this,n),D:this.$D,DD:_.s(this.$D,2,"0"),d:String(this.$W),dd:h(i.weekdaysMin,this.$W,c,2),ddd:h(i.weekdaysShort,this.$W,c,3),dddd:c[this.$W],H:String(o),HH:_.s(o,2,"0"),h:d(1),hh:d(2),a:f(o,a,!0),A:f(o,a,!1),m:String(a),mm:_.s(a,2,"0"),s:String(this.$s),ss:_.s(this.$s,2,"0"),SSS:_.s(this.$ms,3,"0"),Z:r};return n.replace(l,function(e,t){return t||p[e]||r.replace(":","")})},d.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},d.diff=function(e,u,l){var h,d=_.p(u),f=v(e),p=6e4*(f.utcOffset()-this.utcOffset()),m=this-f,b=_.m(this,f);return b=(h={},h[c]=b/12,h[a]=b,h[s]=b/3,h[o]=(m-p)/6048e5,h[i]=(m-p)/864e5,h[r]=m/36e5,h[n]=m/6e4,h[t]=m/1e3,h)[d]||m,l?b:_.a(b)},d.daysInMonth=function(){return this.endOf(a).$D},d.$locale=function(){return m[this.$L]},d.locale=function(e,t){if(!e)return this.$L;var n=this.clone();return n.$L=y(e,t,!0),n},d.clone=function(){return _.w(this.toDate(),this)},d.toDate=function(){return new Date(this.$d)},d.toJSON=function(){return this.toISOString()},d.toISOString=function(){return this.$d.toISOString()},d.toString=function(){return this.$d.toUTCString()},h}();return v.prototype=O.prototype,v.extend=function(e,t){return e(t,O,v),v},v.locale=y,v.isDayjs=b,v.unix=function(e){return v(1e3*e)},v.en=m[p],v.Ls=m,v})},"6hN1":function(e){e.exports={classDetailWrapper:"classDetailWrapper__2T8mX",heroImage:"heroImage__Qr4BU",back:"back__1aQJI",timeLabel:"timeLabel__1dmWn",main:"main__ieBPs",mainTitle:"mainTitle__3QRdT",address:"address__teZVQ",description:"description__25Gbt",section:"section__1vexu",title:"title__gjFEQ",instructorAvatar:"instructorAvatar__25zFg",well:"well__372E6",wellIcon:"wellIcon__3hDcb",wellMain:"wellMain__1JhNM",wellDescription:"wellDescription__1PEH9",wellAction:"wellAction__3j7JB",priceLabel:"priceLabel__3dyS3"}},CBWn:function(e){e.exports={paymentSuccessWrapper:"paymentSuccessWrapper__2RZe2",close:"close__2MK24",paymentSuccessMain:"paymentSuccessMain__pJize",paymentSuccessHeader:"paymentSuccessHeader__17UVM",back:"back__1LxL4",title:"title__2X-kw",heroImage:"heroImage__3yJVp",shader:"shader__3pujb",label:"label__2oUc4",main:"main__2onSq",mainTitle:"mainTitle__1LSxt",timeLabel:"timeLabel__3wp0x",address:"address__2TJ5s",bookingCodeContainer:"bookingCodeContainer__2F9b4",bookingReceived:"bookingReceived__33C71",bookingCode:"bookingCode__2nfDT"}},Dnk9:function(e){e.exports={footer:"footer__YnoJr",hide:"hide__3aVn4",disabled:"disabled__gp8z1",button:"button__2PQ5O"}},GNQB:function(e){e.exports={ldsRing:"ldsRing__3x1W7"}},GjWG:function(e){e.exports={formContainer:"formContainer__1XJ08"}},"Kb/3":function(e,t,n){"use strict";function r(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(){return new Promise(function(e,t){return Promise.resolve(new Promise(function(e){return Q()("https://js.stripe.com/v3/",e)})).then(function(){try{return e()}catch(e){return t(e)}},t)})}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function p(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function O(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function w(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function S(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function C(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function N(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function M(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var P,$,k=n("KM04"),D=(n("vbq8"),n("/QC5")),T=n("6hN1"),A=n.n(T),x=n("Mmjd"),E=n.n(x),L=n("1uTM"),I=n("Dnk9"),W=n.n(I),H=function(e){function t(){for(var t,n,r,o=arguments.length,a=Array(o),s=0;s<o;s++)a[s]=arguments[s];return t=n=i(this,e.call.apply(e,[this].concat(a))),n.onClick=function(e){if(n.props.disabled)return e.preventDefault();n.props.onClick(e)},r=t,i(n,r)}return o(t,e),t.prototype.render=function(e,t){var n,i=e.children,o=e.disabled,a=e.hide;return r(t),Object(k.h)("div",{className:Object(L.b)((n={},n[W.a.footer]=!0,n[W.a.disabled]=o,n[W.a.hide]=a,n))},Object(k.h)("button",{className:W.a.button,onClick:this.onClick,type:"submit"},i))},t}(k.Component),Y=(n("ngyr"),n("nMj1")),B={1:"Mon",2:"Tue",3:"Wed",4:"Thu",5:"Fri",6:"Sat",7:"Sun"},J=(Object(Y.a)(),"pk_test_i0mT0MQhBYOTm3kcHw73xILH"),R=n("GjWG"),F=n.n(R),U=n("r4pm"),Q=n.n(U),V=n("QXSR"),q=Object(k.h)("div",{id:"cc-form"}),G=function(e){function t(){return s(this,t),c(this,e.apply(this,arguments))}return u(t,e),t.prototype.shouldComponentUpdate=function(){return!1},t.prototype.componentDidMount=function(){this.props.card.mount("#cc-form")},t.prototype.render=function(){return q},t}(k.Component),Z=Object(k.h)("div",{id:"payment-request-button"}),z=(function(e){function t(){var n,r,i;s(this,t);for(var o=arguments.length,a=Array(o),u=0;u<o;u++)a[u]=arguments[u];return n=r=c(this,e.call.apply(e,[this].concat(a))),r.mount=function(){return new Promise(function(e,t){var n;return Promise.resolve(r.props.paymentRequest.canMakePayment()).then(function(i){try{return n=i,n?r.props.prButton.mount("#payment-request-button"):document.getElementById("payment-request-button").style.display="none",r.props.paymentRequest.on("paymentmethod",r.props.onPaymentMethod),e()}catch(e){return t(e)}},t)})},i=n,c(r,i)}u(t,e),t.prototype.componentDidMount=function(){this.mount()},t.prototype.shouldComponentUpdate=function(){return!1},t.prototype.render=function(){return Z}}(k.Component),Object(k.h)("div",null,"Loading stripe")),K=function(e){function t(n){s(this,t);var r=c(this,e.call(this,n));return r.registerStripeElements=function(){return new Promise(function(e,t){function n(){return r.setState({loadingStripe:!1}),r.stripe=window.Stripe(J),r.elements=r.stripe.elements(),i=r.elements.create("card",{hidePostalCode:!0}),o=void 0,a=void 0,r.setState({card:i,prButton:o,paymentRequest:a}),e()}var i,o,a;return"Stripe"in window?n.call(this):(r.setState({loadingStripe:!0}),Promise.resolve(l()).then(function(){try{return n.call(this)}catch(e){return t(e)}}.bind(this),t))})},r.onSubmit=function(e){return new Promise(function(t){return t(r.onSubmitCard(e))})},r.onSubmitCard=function(){return new Promise(function(e,t){var n,i,o;return Promise.resolve(r.stripe.createPaymentMethod("card",r.state.card)).then(function(a){try{return n=a,n.error?e(n):(i=n.billingDetails,r.setState({billingDetails:i}),Promise.resolve(r.confirm("method",{payment_method_id:n.paymentMethod.id,amount:r.getAmount()})).then(function(i){function a(){return e(n)}try{return o=i,o.requires_action?Promise.resolve(r.handleAction(o)).then(function(){try{return a.call(this)}catch(e){return t(e)}}.bind(this),t):a.call(this)}catch(e){return t(e)}}.bind(this),t))}catch(e){return t(e)}}.bind(this),t)})},r.handleAction=function(e){return new Promise(function(t,n){var i,o,a;return Promise.resolve(r.stripe.handleCardAction(e.payment_intent_client_secret)).then(function(e){try{return i=e,i.error?t(i):(o={payment_intent_id:i.paymentIntent.id,amount:r.getAmount()},Promise.resolve(r.confirm("intent",o)).then(function(e){try{return a=e,t(i)}catch(e){return n(e)}},n))}catch(e){return n(e)}},n)})},r.confirm=function(e,t){return new Promise(function(n,r){var i,o;return Promise.resolve(fetch(V.a+"/api/payment-"+e+"/confirm/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).then(function(e){try{return i=e,Promise.resolve(i.json()).then(function(e){try{return o=e,n(o)}catch(e){return r(e)}},r)}catch(e){return r(e)}},r)})},r.getAmount=function(){return 100*parseFloat(r.props.amount)},r.onError=function(e){r.props.onError(e)},r.getClientSecret=function(){return new Promise(function(e,t){var n;return Promise.resolve(fetch(V.a+"/api/intent/"+r.getAmount()+"/")).then(function(r){try{return n=r,e(n.ok?n.json():n)}catch(e){return t(e)}},t)})},r.onPaymentMethod=function(e){return new Promise(function(t,n){var i,o,a,s,c,u,l;return Promise.resolve(r.getClientSecret()).then(function(h){try{return i=h,o=i.client_secret,Promise.resolve(r.stripe.confirmPaymentIntent(o,{payment_method:e.paymentMethod.id})).then(function(i){function h(){return t()}try{return a=i,s=a.error,c=a.paymentIntent,s?(e.complete("fail"),h.call(this)):(e.complete("success"),Promise.resolve(r.stripe.handleCardPayment(o)).then(function(e){try{return u=e,l=u.error,h.call(this)}catch(e){return n(e)}}.bind(this),n))}catch(e){return n(e)}}.bind(this),n)}catch(e){return n(e)}}.bind(this),n)})},r.state={loadingStripe:!0,responses:[]},r.props.onSubmit(r.onSubmit),r}return u(t,e),t.prototype.shouldComponentUpdate=function(e,t){return!1===t.loadingStripe&&!0===this.state.loadingStripe},t.prototype.componentWillUnmount=function(){return new Promise(function(e){return this.state.card&&this.state.card.destroy(),e()}.bind(this))},t.prototype.componentDidMount=function(){return new Promise(function(e,t){return Promise.resolve(this.registerStripeElements()).then(function(){try{return e()}catch(e){return t(e)}},t)}.bind(this))},t.prototype.render=function(e,t){var n=t.res,r=t.loadingStripe;return a(e),Object(k.h)("div",null,r?z:Object(k.h)("div",{key:"formContainer",className:F.a.formContainer},Object(k.h)(G,{key:"card",card:this.state.card}),Object(k.h)("pre",null,JSON.stringify(n,null,2))))},t}(k.Component),X=n("CBWn"),ee=n.n(X),te=n("0YCM"),ne=n.n(te),re=Object(k.h)("div",{className:"directions"}),ie=Object(k.h)("div",{className:"rightArrow"}),oe=function(e){function t(){return h(this,t),d(this,e.apply(this,arguments))}return f(t,e),t.prototype.render=function(e){var t=e.venue;return Object(k.h)("a",{href:t.google_maps_url?t.google_maps_url:"https://www.google.co.uk/maps/dir//"+t.address_line_1+" "+t.postcode,target:"_blank",className:ne.a.well,style:{borderTop:"1px solid var(--off-white)"}},Object(k.h)("div",{className:ne.a.wellIcon},re),Object(k.h)("div",{className:ne.a.wellMain},Object(k.h)("div",{className:ne.a.wellName},t.name),Object(k.h)("div",{className:ne.a.wellDescription},t.address_line_1,", ",t.postcode)),Object(k.h)("div",{className:ne.a.wellAction},ie))},t}(k.Component),ae=n("3dZY"),se=n.n(ae),ce=n("GNQB"),ue=n.n(ce),le=Object(k.h)("div",null),he=Object(k.h)("div",null),de=Object(k.h)("div",null),fe=Object(k.h)("div",null),pe=function(e){function t(){return m(this,t),b(this,e.apply(this,arguments))}return y(t,e),t.prototype.render=function(e,t){return p(t),p(e),Object(k.h)("div",{class:ue.a.ldsRing},le,he,de,fe)},t}(k.Component),me=Object(k.h)("div",{className:"leftArrow"}),be=Object(k.h)("div",{className:"hr"}),ye=($=P=function(e){function t(n){v(this,t);var r=_(this,e.call(this,n));return r.formatDay=function(e){return""+B[e][0].toUpperCase()+B[e].substr(1).toLowerCase()},r.mainCategory=function(e){if(0===e.length)return"Dance";var t=e[0].name;return""+t[0].toUpperCase()+t.substr(1).toLowerCase()},r.state={},r}return O(t,e),t.prototype.render=function(e){var t,n=e.booking,r=e.show,i=e.onClose,o=n.class_attended;return Object(k.h)("div",null,Object(k.h)("div",{className:Object(L.b)((t={},t[ee.a.paymentSuccessWrapper]=!0,t[ee.a.close]=!r,t))},Object(k.h)("div",{className:ee.a.paymentSuccessMain},Object(k.h)("div",{className:ee.a.paymentSuccessHeader},Object(k.h)("div",{className:"leftArrow "+ee.a.back,onClick:this.props.onClose}),Object(k.h)("div",{className:ee.a.title},"Booking confirmed"),Object(k.h)("div",{style:{width:"1rem",height:"1rem"}})),Object(k.h)("div",{className:ee.a.classHero},Object(k.h)("div",{className:ee.a.heroImage},Object(k.h)("img",{src:o.hero_image_url||"/assets/images/class.jpeg",alt:o.title}),Object(k.h)("a",{onClick:i,href:"/search",className:""+ee.a.back},me),Object(k.h)("div",{className:ee.a.shader}),Object(k.h)("div",{className:ee.a.label},"Let's do some",Object(k.h)("div",{className:ee.a.title},this.mainCategory(o.categories))))),Object(k.h)("div",{className:ee.a.main},Object(k.h)(oe,{venue:o.venue}),Object(k.h)("div",{className:ee.a.mainTitle},o.title),Object(k.h)("div",{className:ee.a.timeLabel},this.formatDay(o.day)," ",o.start_time," - ",o.end_time),Object(k.h)("div",{className:ee.a.address},o.venue.name," ",o.venue.area),be,Object(k.h)("div",{className:ee.a.bookingCodeContainer},Object(k.h)("div",{className:ee.a.bookingReceived},"I didn't receive the confirmation message."),Object(k.h)("div",{className:ee.a.bookingCode},"Booking ID: ",Object(k.h)("strong",null,n.code)))))))},t}(k.Component),P.defaultProps={booking:{id:34,code:"GAKWL3",venue:{id:1,name:"Pineapple Studios",address_line_1:"7 Langley Street",area:"Covent Gardem",postcode:"WC2H 9JA"},class_attended:{id:5,venue:{id:1,name:"Pineapple Studios",address_line_1:"7 Langley Street",area:"Covent Gardem",postcode:"WC2H 9JA"},day:5,price:13,start_time:"09:06",end_time:"11:00",title:"Salsa",instructors:[{id:3,profile:{bio:"This is my bio. I am a great teacher.",instagram_url:"",facebook_url:"",youtube_url:"",website_url:""},full_name:"New Teacher Surname",name:"New Teacher Surname",email:"adf@gmail.com",phone_number:"07476996601",is_student:!1,is_teacher:!0}],categories:[{id:7,name:"Salsa"}]},start_time:"09:06",end_time:"11:00",created:"2019-09-15T11:37:26.985220Z",modified:"2019-09-15T11:37:26.985328Z"}},$),ve=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_e=Object(k.h)("div",null,"Class not found"),Oe=Object(k.h)("div",{className:"hr"}),ge=Object(k.h)("div",{className:"hr"}),je=Object(k.h)("div",{className:"hr"}),we=Object(k.h)("div",{className:"tick"}),Se=Object(k.h)("div",{className:"bottom"}),Ce=Object(k.h)(pe,null),Ne=function(e){function t(n){g(this,t);var r=j(this,e.call(this,n));return r.onChange=function(e){return function(t){var n;r.setState({values:(n={},n[e]=t.target.value,n)},function(){var e=r.validateValues(),t=e.phone_number;if(e.phone_number)return r.setState({errors:e,error:t})})}},r.validateValues=function(){var e=r.state.values;if(!("phone_number"in e))return{phone_number:"Phone is not valid"};var t=e.phone_number,n=t.split("+"),i=n[0];return n.length>1&&(i=n[1],n.length>2)?{phone_number:'Phone number must have only one "+"'}:/^\d+$/.test(i)?i.length<8?{phone_number:"Phone number is too short"}:{}:{phone_number:"Phone number must be made only of numbers"}},r.onSubmit=function(e){return new Promise(function(t,n){function i(){return c=ve({payment_method_id:r.state.paymentMethod.id,date:r.state.date.format("YYYY-MM-DD"),start_time:r.props.item.start_time,end_time:r.props.item.end_time,class_attended:r.props.item.id,venue:r.props.item.venue.id,email:r.state.values.phone_number+"@example.com"},r.state.values),Promise.resolve(r.postBooking(c)).then(function(e){try{return u=e,t(u.error?r.setState({isSubmitting:!1,error:u.error.message||"Issue making booking"}):r.setState({isSubmitting:!1,success:!0,booking:u}))}catch(e){return n(e)}},n)}var o,a,s,c,u;return e.preventDefault(),e.stopPropagation(),r.setState({isSubmitting:!0}),r.setState({errors:{},error:!1}),o=r.validateValues(),a=o.phone_number,o.phone_number?t(r.setState({isSubmitting:!1,errors:o,error:a})):r.state.paymentMethod?i.call(this):Promise.resolve(r.stripeSubmit(e)).then(function(e){try{return s=e,s.error?t(r.setState({isSubmitting:!1,error:s.error.message})):(r.setState({paymentMethod:s.paymentMethod}),i.call(this))}catch(e){return n(e)}}.bind(this),n)})},r.postBooking=function(e){return new Promise(function(t,n){var r;return Promise.resolve(fetch(V.a+"/api/bookings/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).then(function(e){try{return r=e,t(r.json())}catch(e){return n(e)}},n)})},r.state={success:!1,formIsValid:!1,paymentMethod:null,errors:{},values:{}},r}return w(t,e),t.prototype.componentDidMount=function(){this.setState({date:se()()})},t.prototype.render=function(e,t){var n,r=this,i=e.item,o=e.show,a=e.onClose,s=t.error,c=t.values,u=t.booking,l=t.isSubmitting,h=t.paymentMethod,d=t.success;return i?d?Object(k.h)(ye,{onClose:a,show:o&&d,booking:u}):Object(k.h)("div",null,Object(k.h)("form",{onSubmit:this.onSubmit,className:Object(L.b)((n={},n[E.a.paymentWrapper]=!0,n[E.a.close]=!o,n))},Object(k.h)("div",{className:E.a.paymentMain},Object(k.h)("div",{className:E.a.paymentHeader},Object(k.h)("div",{className:"leftArrow "+E.a.back,onClick:a}),Object(k.h)("div",{className:E.a.title},"Checkout"),Object(k.h)("div",{style:{width:"1rem",height:"1rem"}})),Oe,Object(k.h)("div",{className:E.a.section},Object(k.h)("div",{className:E.a.classTitle},i.title),Object(k.h)("div",{className:E.a.time},B[i.day]," ",i.start_time," - ",i.end_time),Object(k.h)("div",{className:E.a.location},i.venue.name," - ",i.venue.area)),ge,Object(k.h)("div",{className:E.a.section},Object(k.h)("div",{className:E.a.titleContainer},Object(k.h)("div",{className:E.a.title},"Total"),Object(k.h)("div",{className:E.a.titleAside},"£",parseFloat(i.price).toFixed(2))),i.extra_fee&&Object(k.h)("div",{key:"extra_fee",className:E.a.extra},"Please note this studio will charge you an additional",Object(k.h)("div",{className:E.a.strong},"£",i.extra_fee," studio entry fee"),"upon arrival.")),je,Object(k.h)("div",{className:E.a.section},Object(k.h)("div",{className:E.a.titleContainer},Object(k.h)("div",{className:E.a.title},"Payment")),Object(k.h)("div",{className:"errorContainer "+(s||"hide")},Object(k.h)("div",{className:"errorContainer_message"},s)),Object(k.h)("div",{className:E.a.paymentForm},Object(k.h)("div",{column:!0,className:E.a.inputContainer},Object(k.h)("input",{type:"text",className:E.a.input,placeholder:"Phone number",name:"phone_number",key:"phone_number",value:c.phone_number,onChange:this.onChange("phone_number")})),Object(k.h)("div",{key:"paid",style:{margin:h?"1rem 0":0,height:h?"auto":0}},we," Paid!"),Object(k.h)(K,{key:"StripeForm",amount:i.price,onSubmit:function(e){r.stripeSubmit=e}}))),Se),Object(k.h)(H,{hide:!o,onClick:this.onSubmit},Object(k.h)("div",null,l?Ce:"Confirm booking")))):_e},t}(k.Component),Me=Object(k.h)("div",{column:!0,flex:!0,jc:"center",ai:"center"},Object(k.h)("img",{width:"85",height:"119",src:"/assets/images/dancing.gif",alt:"loading"}),Object(k.h)("div",null,"Loading")),Pe=Object(k.h)("div",{className:"leftArrow"}),$e=Object(k.h)("div",{className:"rightArrow"}),ke=function(e){function t(n){C(this,t);var r=N(this,e.call(this,n));return r.onBack=function(e){if(e.preventDefault(),e.stopPropagation(),r.props.i)return window.history.back();Object(D.route)("/search/")},r.hidePayment=function(){r.setState({showPayment:!1})},r.state={item:r.props.data.state.classes[n.matches.id],showPayment:!1},r}return M(t,e),t.prototype.componentDidMount=function(){return new Promise(function(e,t){var n;return Promise.resolve(this.props.data.getClass(this.props.matches.id)).then(function(r){try{return n=r,this.setState({item:n}),e()}catch(e){return t(e)}}.bind(this),t)}.bind(this))},t.prototype.render=function(e,t){var n=this,r=t.item,i=t.showPayment;if(S(e),!r)return Me;var o=r.instructors[0],a=o.profile||{bio:""},s=B[r.day]&&B[r.day].toUpperCase();return Object(k.h)("div",null,Object(k.h)(Ne,{show:i,onClose:this.hidePayment,item:r}),Object(k.h)("div",{className:A.a.classDetailWrapper},Object(k.h)("div",{className:A.a.classHero},Object(k.h)("div",{className:A.a.heroImage},Object(k.h)("img",{src:r.hero_image_url||"/assets/images/class.jpeg",alt:r.title}),Object(k.h)("a",{onClick:this.onBack,href:"/search",className:""+A.a.back},Pe),Object(k.h)("div",{className:A.a.timeLabel},s," ",r.start_time," - ",r.end_time))),Object(k.h)("div",{className:A.a.main},Object(k.h)("div",{className:A.a.mainTitle},r.title),Object(k.h)("div",{className:A.a.address},r.venue.name," ",r.venue.area),Object(k.h)(oe,{venue:r.venue}),Object(k.h)("a",{className:A.a.well,href:""+a.slug},Object(k.h)("div",{className:A.a.wellIcon},Object(k.h)("img",{className:A.a.instructorAvatar,src:a.profile_image_url||"https://api.adorable.io/avatars/60/"+o.email+".png",alt:o.name})),Object(k.h)("div",{className:A.a.wellMain},Object(k.h)("div",{className:A.a.wellName},o.name),Object(k.h)("div",{className:A.a.wellDescription},a.bio.substring(0,50))),Object(k.h)("div",{className:A.a.wellAction},$e)),r.description&&Object(k.h)("div",{className:A.a.section},Object(k.h)("div",{className:A.a.title},"About"),Object(k.h)("div",{className:A.a.description},r.description)))),Object(k.h)(H,{onClick:function(){return n.setState({showPayment:!0})}},Object(k.h)("div",null,"£",r.price," ",Object(k.h)("div",{className:A.a.priceLabel},"Book now"))))},t}(k.Component);ke.getInitialProps=function(e){return new Promise(function(t,n){var r,i,o,a;return i=e.id,Promise.resolve(fetch("https://instructorlist-django.herokuapp.com/api/classes/"+i)).then(function(e){try{return o=e,Promise.resolve(o.json()).then(function(e){try{return a=e,t({classes:(r={},r[i]=a,r)})}catch(e){return n(e)}},n)}catch(e){return n(e)}},n)})};t.default=ke},Mmjd:function(e){e.exports={paymentWrapper:"paymentWrapper__1x25b",close:"close__1l-EC",paymentMain:"paymentMain__2L3VM",paymentHeader:"paymentHeader__3BZWN",back:"back__1GJnh",title:"title__1Os6k",section:"section__2SSUU",time:"time__IA1AL",classTitle:"classTitle__2boOm",titleContainer:"titleContainer__O_OAw",extra:"extra__ktVQ8",strong:"strong__ved2L",paymentForm:"paymentForm__TFqeV",inputContainer:"inputContainer__13SbB"}},r4pm:function(e,t){var n,r,i;!function(o,a){r=[],n=a,void 0!==(i="function"==typeof n?n.apply(t,r):n)&&(e.exports=i)}(0,function(){function e(e,t){e=e.push?e:[e];var n,r,i,o,a=[],s=e.length,l=s;for(n=function(e,n){n.length&&a.push(e),--l||t(a)};s--;)r=e[s],i=c[r],i?n(r,i):(o=u[r]=u[r]||[],o.push(n))}function t(e,t){if(e){var n=u[e];if(c[e]=t,n)for(;n.length;)n[0](e,t),n.splice(0,1)}}function n(e,t){e.call&&(e={success:e}),t.length?(e.error||a)(t):(e.success||a)(e)}function r(e,t,n,i){var o,s,c=document,u=n.async,l=(n.numRetries||0)+1,h=n.before||a,d=e.replace(/^(css|img)!/,"");i=i||0,/(^css!|\.css$)/.test(e)?(s=c.createElement("link"),s.rel="stylesheet",s.href=d,(o="hideFocus"in s)&&s.relList&&(o=0,s.rel="preload",s.as="style")):/(^img!|\.(png|gif|jpg|svg)$)/.test(e)?(s=c.createElement("img"),s.src=d):(s=c.createElement("script"),s.src=e,s.async=void 0===u||u),s.onload=s.onerror=s.onbeforeload=function(a){var c=a.type[0];if(o)try{s.sheet.cssText.length||(c="e")}catch(e){18!=e.code&&(c="e")}if("e"==c){if((i+=1)<l)return r(e,t,n,i)}else if("preload"==s.rel&&"style"==s.as)return s.rel="stylesheet";t(e,c,a.defaultPrevented)},!1!==h(e,s)&&c.head.appendChild(s)}function i(e,t,n){e=e.push?e:[e];var i,o,a=e.length,s=a,c=[];for(i=function(e,n,r){if("e"==n&&c.push(e),"b"==n){if(!r)return;c.push(e)}--a||t(c)},o=0;o<s;o++)r(e[o],i,n)}function o(e,r,o){function a(r,o){i(e,function(e){n(u,e),r&&n({success:r,error:o},e),t(c,e)},u)}var c,u;if(r&&r.trim&&(c=r),u=(c?o:r)||{},c){if(c in s)throw"LoadJS";s[c]=!0}if(u.returnPromise)return new Promise(a);a()}var a=function(){},s={},c={},u={};return o.ready=function(t,r){return e(t,function(e){n(r,e)}),o},o.done=function(e){t(e,[])},o.reset=function(){s={},c={},u={}},o.isDefined=function(e){return e in s},o})},vbq8:function(){}});
//# sourceMappingURL=route-class.page.chunk.52876.js.map