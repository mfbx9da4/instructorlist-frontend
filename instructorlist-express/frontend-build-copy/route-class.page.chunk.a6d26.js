webpackJsonp([0],{"1uTM":function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(t){return Object.entries(t).filter(function(t){return t[1]}).map(function(t){return t[0]}).join(" ")};e.b=r},"3dZY":function(t){!function(e,n){t.exports=n()}(0,function(){"use strict";var t="millisecond",e="second",n="minute",r="hour",i="day",o="week",s="month",a="quarter",c="year",u=/^(\d{4})-?(\d{1,2})-?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?.?(\d{1,3})?$/,l=/\[([^\]]+)]|Y{2,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,h=function(t,e,n){var r=String(t);return!r||r.length>=e?t:""+Array(e+1-r.length).join(n)+t},f={s:h,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),r=Math.floor(n/60),i=n%60;return(e<=0?"+":"-")+h(r,2,"0")+":"+h(i,2,"0")},m:function(t,e){var n=12*(e.year()-t.year())+(e.month()-t.month()),r=t.clone().add(n,s),i=e-r<0,o=t.clone().add(n+(i?-1:1),s);return Number(-(n+(e-r)/(i?r-o:o-r))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(u){return{M:s,y:c,w:o,d:i,h:r,m:n,s:e,ms:t,Q:a}[u]||String(u||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},p={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},d="en",m={};m[d]=p;var b=function(t){return t instanceof O},y=function(t,e,n){var r;if(!t)return d;if("string"==typeof t)m[t]&&(r=t),e&&(m[t]=e,r=t);else{var i=t.name;m[i]=t,r=i}return n||(d=r),r},v=function(t,e,n){if(b(t))return t.clone();var r=e?"string"==typeof e?{format:e,pl:n}:e:{};return r.date=t,new O(r)},_=f;_.l=y,_.i=b,_.w=function(t,e){return v(t,{locale:e.$L,utc:e.$u})};var O=function(){function h(t){this.$L=this.$L||y(t.locale,null,!0),this.parse(t)}var f=h.prototype;return f.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(_.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var r=e.match(u);if(r)return n?new Date(Date.UTC(r[1],r[2]-1,r[3]||1,r[4]||0,r[5]||0,r[6]||0,r[7]||0)):new Date(r[1],r[2]-1,r[3]||1,r[4]||0,r[5]||0,r[6]||0,r[7]||0)}return new Date(e)}(t),this.init()},f.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},f.$utils=function(){return _},f.isValid=function(){return!("Invalid Date"===this.$d.toString())},f.isSame=function(t,e){var n=v(t);return this.startOf(e)<=n&&n<=this.endOf(e)},f.isAfter=function(t,e){return v(t)<this.startOf(e)},f.isBefore=function(t,e){return this.endOf(e)<v(t)},f.$g=function(t,e,n){return _.u(t)?this[e]:this.set(n,t)},f.year=function(t){return this.$g(t,"$y",c)},f.month=function(t){return this.$g(t,"$M",s)},f.day=function(t){return this.$g(t,"$W",i)},f.date=function(t){return this.$g(t,"$D","date")},f.hour=function(t){return this.$g(t,"$H",r)},f.minute=function(t){return this.$g(t,"$m",n)},f.second=function(t){return this.$g(t,"$s",e)},f.millisecond=function(e){return this.$g(e,"$ms",t)},f.unix=function(){return Math.floor(this.valueOf()/1e3)},f.valueOf=function(){return this.$d.getTime()},f.startOf=function(t,a){var u=this,l=!!_.u(a)||a,h=_.p(t),f=function(t,e){var n=_.w(u.$u?Date.UTC(u.$y,e,t):new Date(u.$y,e,t),u);return l?n:n.endOf(i)},p=function(t,e){return _.w(u.toDate()[t].apply(u.toDate(),(l?[0,0,0,0]:[23,59,59,999]).slice(e)),u)},d=this.$W,m=this.$M,b=this.$D,y="set"+(this.$u?"UTC":"");switch(h){case c:return l?f(1,0):f(31,11);case s:return l?f(1,m):f(0,m+1);case o:var v=this.$locale().weekStart||0,O=(d<v?d+7:d)-v;return f(l?b-O:b+(6-O),m);case i:case"date":return p(y+"Hours",0);case r:return p(y+"Minutes",1);case n:return p(y+"Seconds",2);case e:return p(y+"Milliseconds",3);default:return this.clone()}},f.endOf=function(t){return this.startOf(t,!1)},f.$set=function(o,a){var u,l=_.p(o),h="set"+(this.$u?"UTC":""),f=(u={},u[i]=h+"Date",u.date=h+"Date",u[s]=h+"Month",u[c]=h+"FullYear",u[r]=h+"Hours",u[n]=h+"Minutes",u[e]=h+"Seconds",u[t]=h+"Milliseconds",u)[l],p=l===i?this.$D+(a-this.$W):a;if(l===s||l===c){var d=this.clone().set("date",1);d.$d[f](p),d.init(),this.$d=d.set("date",Math.min(this.$D,d.daysInMonth())).toDate()}else f&&this.$d[f](p);return this.init(),this},f.set=function(t,e){return this.clone().$set(t,e)},f.get=function(t){return this[_.p(t)]()},f.add=function(t,a){var u,l=this;t=Number(t);var h=_.p(a),f=function(e){var n=v(l);return _.w(n.date(n.date()+Math.round(e*t)),l)};if(h===s)return this.set(s,this.$M+t);if(h===c)return this.set(c,this.$y+t);if(h===i)return f(1);if(h===o)return f(7);var p=(u={},u[n]=6e4,u[r]=36e5,u[e]=1e3,u)[h]||1,d=this.valueOf()+t*p;return _.w(d,this)},f.subtract=function(t,e){return this.add(-1*t,e)},f.format=function(t){var e=this;if(!this.isValid())return"Invalid Date";var n=t||"YYYY-MM-DDTHH:mm:ssZ",r=_.z(this),i=this.$locale(),o=this.$H,s=this.$m,a=this.$M,c=i.weekdays,u=i.months,h=function(t,r,i,o){return t&&(t[r]||t(e,n))||i[r].substr(0,o)},f=function(t){return _.s(o%12||12,t,"0")},p=i.meridiem||function(t,e,n){var r=t<12?"AM":"PM";return n?r.toLowerCase():r},d={YY:String(this.$y).slice(-2),YYYY:this.$y,M:a+1,MM:_.s(a+1,2,"0"),MMM:h(i.monthsShort,a,u,3),MMMM:u[a]||u(this,n),D:this.$D,DD:_.s(this.$D,2,"0"),d:String(this.$W),dd:h(i.weekdaysMin,this.$W,c,2),ddd:h(i.weekdaysShort,this.$W,c,3),dddd:c[this.$W],H:String(o),HH:_.s(o,2,"0"),h:f(1),hh:f(2),a:p(o,s,!0),A:p(o,s,!1),m:String(s),mm:_.s(s,2,"0"),s:String(this.$s),ss:_.s(this.$s,2,"0"),SSS:_.s(this.$ms,3,"0"),Z:r};return n.replace(l,function(t,e){return e||d[t]||r.replace(":","")})},f.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},f.diff=function(t,u,l){var h,f=_.p(u),p=v(t),d=6e4*(p.utcOffset()-this.utcOffset()),m=this-p,b=_.m(this,p);return b=(h={},h[c]=b/12,h[s]=b,h[a]=b/3,h[o]=(m-d)/6048e5,h[i]=(m-d)/864e5,h[r]=m/36e5,h[n]=m/6e4,h[e]=m/1e3,h)[f]||m,l?b:_.a(b)},f.daysInMonth=function(){return this.endOf(s).$D},f.$locale=function(){return m[this.$L]},f.locale=function(t,e){if(!t)return this.$L;var n=this.clone();return n.$L=y(t,e,!0),n},f.clone=function(){return _.w(this.toDate(),this)},f.toDate=function(){return new Date(this.$d)},f.toJSON=function(){return this.toISOString()},f.toISOString=function(){return this.$d.toISOString()},f.toString=function(){return this.$d.toUTCString()},h}();return v.prototype=O.prototype,v.extend=function(t,e){return t(e,O,v),v},v.locale=y,v.isDayjs=b,v.unix=function(t){return v(1e3*t)},v.en=m[d],v.Ls=m,v})},"6hN1":function(t){t.exports={classDetailWrapper:"classDetailWrapper__2T8mX",heroImage:"heroImage__Qr4BU",back:"back__1aQJI",timeLabel:"timeLabel__1dmWn",main:"main__ieBPs",mainTitle:"mainTitle__3QRdT",address:"address__teZVQ",description:"description__25Gbt",section:"section__1vexu",title:"title__gjFEQ",instructorAvatar:"instructorAvatar__25zFg",well:"well__372E6",wellIcon:"wellIcon__3hDcb",wellMain:"wellMain__1JhNM",wellDescription:"wellDescription__1PEH9",wellAction:"wellAction__3j7JB",priceLabel:"priceLabel__3dyS3"}},Dnk9:function(t){t.exports={footer:"footer__YnoJr",hide:"hide__3aVn4",disabled:"disabled__gp8z1",button:"button__2PQ5O"}},GNQB:function(t){t.exports={ldsRing:"ldsRing__3x1W7"}},GjWG:function(t){t.exports={formContainer:"formContainer__1XJ08"}},"Kb/3":function(t,e,n){"use strict";function r(t){if(null==t)throw new TypeError("Cannot destructure undefined")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t){if(null==t)throw new TypeError("Cannot destructure undefined")}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function l(){return new Promise(function(t,e){return Promise.resolve(new Promise(function(t){return W()("https://js.stripe.com/v3/",t)})).then(function(){try{return t()}catch(t){return e(t)}},e)})}function h(t){if(null==t)throw new TypeError("Cannot destructure undefined")}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function d(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function m(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function b(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function y(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function v(t){if(null==t)throw new TypeError("Cannot destructure undefined")}function _(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function O(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function g(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var j=n("KM04"),w=(n("vbq8"),n("/QC5")),S=n("6hN1"),$=n.n(S),P=n("Mmjd"),M=n.n(P),N=n("1uTM"),C=n("Dnk9"),D=n.n(C),k=function(t){function e(){for(var e,n,r,o=arguments.length,s=Array(o),a=0;a<o;a++)s[a]=arguments[a];return e=n=i(this,t.call.apply(t,[this].concat(s))),n.onClick=function(t){if(n.props.disabled)return t.preventDefault();n.props.onClick(t)},r=e,i(n,r)}return o(e,t),e.prototype.render=function(t,e){var n,i=t.children,o=t.disabled,s=t.hide;return r(e),Object(j.h)("div",{className:Object(N.b)((n={},n[D.a.footer]=!0,n[D.a.disabled]=o,n[D.a.hide]=s,n))},Object(j.h)("button",{className:D.a.button,onClick:this.onClick,type:"submit"},i))},e}(j.Component),T=(n("ngyr"),n("nMj1")),A={1:"Mon",2:"Tue",3:"Wed",4:"Thu",5:"Fri",6:"Sat",7:"Sun"},x=(Object(T.a)(),"pk_test_i0mT0MQhBYOTm3kcHw73xILH"),E=n("GjWG"),I=n.n(E),L=n("r4pm"),W=n.n(L),Y=n("QXSR"),H=Object(j.h)("div",{id:"cc-form"}),B=function(t){function e(){return a(this,e),c(this,t.apply(this,arguments))}return u(e,t),e.prototype.shouldComponentUpdate=function(){return!1},e.prototype.componentDidMount=function(){this.props.card.mount("#cc-form")},e.prototype.render=function(){return H},e}(j.Component),F=Object(j.h)("div",{id:"payment-request-button"}),J=(function(t){function e(){var n,r,i;a(this,e);for(var o=arguments.length,s=Array(o),u=0;u<o;u++)s[u]=arguments[u];return n=r=c(this,t.call.apply(t,[this].concat(s))),r.mount=function(){return new Promise(function(t,e){var n;return Promise.resolve(r.props.paymentRequest.canMakePayment()).then(function(i){try{return n=i,n?r.props.prButton.mount("#payment-request-button"):document.getElementById("payment-request-button").style.display="none",r.props.paymentRequest.on("paymentmethod",r.props.onPaymentMethod),t()}catch(t){return e(t)}},e)})},i=n,c(r,i)}u(e,t),e.prototype.componentDidMount=function(){this.mount()},e.prototype.shouldComponentUpdate=function(){return!1},e.prototype.render=function(){return F}}(j.Component),Object(j.h)("div",null,"Loading stripe")),R=function(t){function e(n){a(this,e);var r=c(this,t.call(this,n));return r.registerStripeElements=function(){return new Promise(function(t,e){function n(){return r.setState({loadingStripe:!1}),r.stripe=window.Stripe(x),r.elements=r.stripe.elements(),i=r.elements.create("card",{hidePostalCode:!0}),o=void 0,s=void 0,r.setState({card:i,prButton:o,paymentRequest:s}),t()}var i,o,s;return"Stripe"in window?n.call(this):(r.setState({loadingStripe:!0}),Promise.resolve(l()).then(function(){try{return n.call(this)}catch(t){return e(t)}}.bind(this),e))})},r.onSubmit=function(t){return new Promise(function(e){return e(r.onSubmitCard(t))})},r.onSubmitCard=function(){return new Promise(function(t,e){var n,i,o;return Promise.resolve(r.stripe.createPaymentMethod("card",r.state.card)).then(function(s){try{return n=s,n.error?t(n):(i=n.billingDetails,r.setState({billingDetails:i}),Promise.resolve(r.confirm("method",{payment_method_id:n.paymentMethod.id,amount:r.getAmount()})).then(function(i){function s(){return t(n)}try{return o=i,o.requires_action?Promise.resolve(r.handleAction(o)).then(function(){try{return s.call(this)}catch(t){return e(t)}}.bind(this),e):s.call(this)}catch(t){return e(t)}}.bind(this),e))}catch(t){return e(t)}}.bind(this),e)})},r.handleAction=function(t){return new Promise(function(e,n){var i,o,s;return Promise.resolve(r.stripe.handleCardAction(t.payment_intent_client_secret)).then(function(t){try{return i=t,i.error?e(i):(o={payment_intent_id:i.paymentIntent.id,amount:r.getAmount()},Promise.resolve(r.confirm("intent",o)).then(function(t){try{return s=t,e(i)}catch(t){return n(t)}},n))}catch(t){return n(t)}},n)})},r.confirm=function(t,e){return new Promise(function(n,r){var i,o;return Promise.resolve(fetch(Y.a+"/api/payment-"+t+"/confirm/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).then(function(t){try{return i=t,Promise.resolve(i.json()).then(function(t){try{return o=t,n(o)}catch(t){return r(t)}},r)}catch(t){return r(t)}},r)})},r.getAmount=function(){return 100*parseFloat(r.props.amount)},r.onError=function(t){r.props.onError(t)},r.getClientSecret=function(){return new Promise(function(t,e){var n;return Promise.resolve(fetch(Y.a+"/api/intent/"+r.getAmount()+"/")).then(function(r){try{return n=r,t(n.ok?n.json():n)}catch(t){return e(t)}},e)})},r.onPaymentMethod=function(t){return new Promise(function(e,n){var i,o,s,a,c,u,l;return Promise.resolve(r.getClientSecret()).then(function(h){try{return i=h,o=i.client_secret,Promise.resolve(r.stripe.confirmPaymentIntent(o,{payment_method:t.paymentMethod.id})).then(function(i){function h(){return e()}try{return s=i,a=s.error,c=s.paymentIntent,a?(t.complete("fail"),h.call(this)):(t.complete("success"),Promise.resolve(r.stripe.handleCardPayment(o)).then(function(t){try{return u=t,l=u.error,h.call(this)}catch(t){return n(t)}}.bind(this),n))}catch(t){return n(t)}}.bind(this),n)}catch(t){return n(t)}}.bind(this),n)})},r.state={loadingStripe:!0,responses:[]},r.props.onSubmit(r.onSubmit),r}return u(e,t),e.prototype.componentDidUpdate=function(){},e.prototype.shouldComponentUpdate=function(t,e){return!1===e.loadingStripe&&!0===this.state.loadingStripe},e.prototype.componentWillUnmount=function(){return new Promise(function(t){return this.state.card&&this.state.card.destroy(),t()}.bind(this))},e.prototype.componentDidMount=function(){return new Promise(function(t,e){return Promise.resolve(this.registerStripeElements()).then(function(){try{return t()}catch(t){return e(t)}},e)}.bind(this))},e.prototype.render=function(t,e){var n=e.res,r=e.loadingStripe;return s(t),Object(j.h)("div",null,r?J:Object(j.h)("div",{key:"formContainer",className:I.a.formContainer},Object(j.h)(B,{key:"card",card:this.state.card}),Object(j.h)("pre",null,JSON.stringify(n,null,2))))},e}(j.Component),U=n("3dZY"),Q=n.n(U),q=n("GNQB"),V=n.n(q),G=Object(j.h)("div",null),Z=Object(j.h)("div",null),z=Object(j.h)("div",null),X=Object(j.h)("div",null),K=function(t){function e(){return f(this,e),p(this,t.apply(this,arguments))}return d(e,t),e.prototype.render=function(t,e){return h(e),h(t),Object(j.h)("div",{class:V.a.ldsRing},G,Z,z,X)},e}(j.Component),tt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},et=Object(j.h)("div",null,"Class not found"),nt=Object(j.h)("div",null),rt=Object(j.h)("div",{className:"hr"}),it=Object(j.h)("div",{className:"hr"}),ot=Object(j.h)("div",{className:"hr"}),st=Object(j.h)("div",{key:"paid"},Object(j.h)("div",{className:"tick"})," Paid!"),at=Object(j.h)("div",{className:"bottom"}),ct=Object(j.h)(K,null),ut=function(t){function e(n){m(this,e);var r=b(this,t.call(this,n));return r.onChange=function(t){return function(e){var n;r.setState({values:(n={},n[t]=e.target.value,n)})}},r.validateValues=function(){var t=r.state.values;if(!("phone_number"in t))return{phone_number:"Phone is not valid"};var e=t.phone_number,n=e.split("+");if(n.length>2)return{phone_number:'Phone number must have only one "+"'};var i=n[1];return/^\d+$/.test(i)?i.length<8?{phone_number:"Phone number is too short"}:{}:{phone_number:"Phone number must be made only of numbers"}},r.onSubmit=function(t){return new Promise(function(e,n){function i(){return c=tt({payment_method_id:r.state.paymentMethod.id,date:r.state.date.format("YYYY-MM-DD"),start_time:r.props.item.start_time,end_time:r.props.item.end_time,class_attended:r.props.item.id,venue:r.props.item.venue.id,email:r.state.values.phone_number+"@example.com"},r.state.values),Promise.resolve(r.postBooking(c)).then(function(t){try{return u=t,u.error?e(r.setState({isSubmitting:!1,error:u.error.message||"Issue making booking"})):(alert(u.code),e(r.setState({isSubmitting:!1,success:!0,code:u.code})))}catch(t){return n(t)}},n)}var o,s,a,c,u;return t.preventDefault(),t.stopPropagation(),r.setState({isSubmitting:!0}),r.setState({errors:{},error:!1}),o=r.validateValues(),s=o.phone_number,o.phone_number?e(r.setState({isSubmitting:!1,errors:o,error:s})):r.state.paymentMethod?i.call(this):Promise.resolve(r.stripeSubmit(t)).then(function(t){try{return a=t,a.error?e(r.setState({isSubmitting:!1,error:a.error.message})):(r.setState({paymentMethod:a.paymentMethod}),i.call(this))}catch(t){return n(t)}}.bind(this),n)})},r.postBooking=function(t){return new Promise(function(e,n){var r;return Promise.resolve(fetch(Y.a+"/api/bookings/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).then(function(t){try{return r=t,e(r.json())}catch(t){return n(t)}},n)})},r.state={formIsValid:!1,paymentMethod:null,errors:{},values:{}},r}return y(e,t),e.prototype.componentDidMount=function(){this.setState({date:Q()()})},e.prototype.render=function(t,e){var n,r=this,i=t.item,o=t.show,s=e.error,a=e.values,c=e.isSubmitting,u=e.paymentMethod;return i?Object(j.h)("div",null,Object(j.h)("form",{onSubmit:this.onSubmit,className:Object(N.b)((n={},n[M.a.paymentWrapper]=!0,n[M.a.close]=!o,n))},Object(j.h)("div",{className:M.a.paymentMain},Object(j.h)("div",{className:M.a.paymentHeader},Object(j.h)("div",{className:"leftArrow "+M.a.back,onClick:this.props.onClose}),Object(j.h)("div",{className:M.a.title},"Checkout"),nt),rt,Object(j.h)("div",{className:M.a.section},Object(j.h)("div",{className:M.a.classTitle},i.title),Object(j.h)("div",{className:M.a.time},A[i.day]," ",i.start_time," - ",i.end_time),Object(j.h)("div",{className:M.a.location},i.venue.name," - ",i.venue.area)),it,Object(j.h)("div",{className:M.a.section},Object(j.h)("div",{className:M.a.titleContainer},Object(j.h)("div",{className:M.a.title},"Total"),Object(j.h)("div",{className:M.a.titleAside},"£",parseFloat(i.price).toFixed(2))),i.extra_fee&&Object(j.h)("div",{key:"extra_fee",className:M.a.extra},"Please note this studio will charge you an additional",Object(j.h)("div",{className:M.a.strong},"£",i.extra_fee," studio entry fee"),"upon arrival.")),ot,Object(j.h)("div",{className:M.a.section},Object(j.h)("div",{className:M.a.titleContainer},Object(j.h)("div",{className:M.a.title},"Payment")),Object(j.h)("div",{className:"errorContainer "+(s||"hide")},Object(j.h)("div",{className:"errorContainer_message"},s)),Object(j.h)("div",{className:M.a.paymentForm},Object(j.h)("div",{column:!0,className:M.a.inputContainer},Object(j.h)("input",{type:"text",className:M.a.input,placeholder:"Phone number",name:"phone_number",key:"phone_number",value:a.phone_number,onChange:this.onChange("phone_number")})),u&&st,Object(j.h)(R,{key:"StripeForm",amount:i.price,onSubmit:function(t){r.stripeSubmit=t}}))),at),Object(j.h)(k,{hide:!o,onClick:this.onSubmit},Object(j.h)("div",null,c?ct:"Confirm booking")))):et},e}(j.Component),lt=Object(j.h)("div",{column:!0,flex:!0,jc:"center",ai:"center"},Object(j.h)("img",{width:"85",height:"119",src:"/assets/images/dancing.gif",alt:"loading"}),Object(j.h)("div",null,"Loading")),ht=Object(j.h)("div",{className:"leftArrow"}),ft=Object(j.h)("div",{className:"directions"}),pt=Object(j.h)("div",{className:"rightArrow"}),dt=Object(j.h)("div",{className:"rightArrow"}),mt=function(t){function e(n){_(this,e);var r=O(this,t.call(this,n));return r.onBack=function(t){if(t.preventDefault(),t.stopPropagation(),r.props.i)return window.history.back();Object(w.route)("/search/")},r.hidePayment=function(){r.setState({showPayment:!1})},r.state={item:r.props.data.state.classes[n.matches.id],showPayment:!1},r}return g(e,t),e.prototype.componentDidMount=function(){return new Promise(function(t,e){var n;return Promise.resolve(this.props.data.getClass(this.props.matches.id)).then(function(r){try{return n=r,this.setState({item:n}),t()}catch(t){return e(t)}}.bind(this),e)}.bind(this))},e.prototype.render=function(t,e){var n=this,r=e.item,i=e.showPayment;if(v(t),!r)return lt;var o=r.instructors[0],s=o.profile||{bio:""};return Object(j.h)("div",null,Object(j.h)(ut,{show:i,onClose:this.hidePayment,item:r}),Object(j.h)("div",{className:$.a.classDetailWrapper},Object(j.h)("div",{className:$.a.classHero},Object(j.h)("div",{className:$.a.heroImage},Object(j.h)("img",{src:r.hero_image_url||"/assets/images/class.jpeg",alt:r.title}),Object(j.h)("a",{onClick:this.onBack,href:"/search",className:""+$.a.back},ht),Object(j.h)("div",{className:$.a.timeLabel},A[r.day].toUpperCase()," ",r.start_time," -"," ",r.end_time))),Object(j.h)("div",{className:$.a.main},Object(j.h)("div",{className:$.a.mainTitle},r.title),Object(j.h)("div",{className:$.a.address},r.venue.name," ",r.venue.area),Object(j.h)("a",{href:r.venue.google_maps_url?r.venue.google_maps_url:"https://www.google.co.uk/maps/dir//"+r.venue.address_line_1+" "+r.venue.postcode,target:"_blank",className:$.a.well,style:{borderTop:"1px solid var(--off-white)"}},Object(j.h)("div",{className:$.a.wellIcon},ft),Object(j.h)("div",{className:$.a.wellMain},Object(j.h)("div",{className:$.a.wellName},r.venue.name),Object(j.h)("div",{className:$.a.wellDescription},r.venue.address_line_1,", ",r.venue.postcode)),Object(j.h)("div",{className:$.a.wellAction},pt)),Object(j.h)("a",{className:$.a.well,href:""+s.slug},Object(j.h)("div",{className:$.a.wellIcon},Object(j.h)("img",{className:$.a.instructorAvatar,src:s.profile_image_url||"https://api.adorable.io/avatars/60/"+o.email+".png",alt:o.name})),Object(j.h)("div",{className:$.a.wellMain},Object(j.h)("div",{className:$.a.wellName},o.name),Object(j.h)("div",{className:$.a.wellDescription},s.bio.substring(0,50))),Object(j.h)("div",{className:$.a.wellAction},dt)),r.description&&Object(j.h)("div",{className:$.a.section},Object(j.h)("div",{className:$.a.title},"About"),Object(j.h)("div",{className:$.a.description},r.description)))),Object(j.h)(k,{onClick:function(){return n.setState({showPayment:!0})}},Object(j.h)("div",null,"£",r.price," ",Object(j.h)("div",{className:$.a.priceLabel},"Book now"))))},e}(j.Component);mt.getInitialProps=function(t){return new Promise(function(e,n){var r,i,o,s;return i=t.id,Promise.resolve(fetch("https://instructorlist-django.herokuapp.com/api/classes/"+i)).then(function(t){try{return o=t,Promise.resolve(o.json()).then(function(t){try{return s=t,e({classes:(r={},r[i]=s,r)})}catch(t){return n(t)}},n)}catch(t){return n(t)}},n)})};e.default=mt},Mmjd:function(t){t.exports={paymentWrapper:"paymentWrapper__1x25b",close:"close__1l-EC",paymentMain:"paymentMain__2L3VM",paymentHeader:"paymentHeader__3BZWN",back:"back__1GJnh",title:"title__1Os6k",section:"section__2SSUU",time:"time__IA1AL",classTitle:"classTitle__2boOm",titleContainer:"titleContainer__O_OAw",extra:"extra__ktVQ8",strong:"strong__ved2L",paymentForm:"paymentForm__TFqeV",inputContainer:"inputContainer__13SbB"}},r4pm:function(t,e){var n,r,i;!function(o,s){r=[],n=s,void 0!==(i="function"==typeof n?n.apply(e,r):n)&&(t.exports=i)}(0,function(){function t(t,e){t=t.push?t:[t];var n,r,i,o,s=[],a=t.length,l=a;for(n=function(t,n){n.length&&s.push(t),--l||e(s)};a--;)r=t[a],i=c[r],i?n(r,i):(o=u[r]=u[r]||[],o.push(n))}function e(t,e){if(t){var n=u[t];if(c[t]=e,n)for(;n.length;)n[0](t,e),n.splice(0,1)}}function n(t,e){t.call&&(t={success:t}),e.length?(t.error||s)(e):(t.success||s)(t)}function r(t,e,n,i){var o,a,c=document,u=n.async,l=(n.numRetries||0)+1,h=n.before||s,f=t.replace(/^(css|img)!/,"");i=i||0,/(^css!|\.css$)/.test(t)?(a=c.createElement("link"),a.rel="stylesheet",a.href=f,(o="hideFocus"in a)&&a.relList&&(o=0,a.rel="preload",a.as="style")):/(^img!|\.(png|gif|jpg|svg)$)/.test(t)?(a=c.createElement("img"),a.src=f):(a=c.createElement("script"),a.src=t,a.async=void 0===u||u),a.onload=a.onerror=a.onbeforeload=function(s){var c=s.type[0];if(o)try{a.sheet.cssText.length||(c="e")}catch(t){18!=t.code&&(c="e")}if("e"==c){if((i+=1)<l)return r(t,e,n,i)}else if("preload"==a.rel&&"style"==a.as)return a.rel="stylesheet";e(t,c,s.defaultPrevented)},!1!==h(t,a)&&c.head.appendChild(a)}function i(t,e,n){t=t.push?t:[t];var i,o,s=t.length,a=s,c=[];for(i=function(t,n,r){if("e"==n&&c.push(t),"b"==n){if(!r)return;c.push(t)}--s||e(c)},o=0;o<a;o++)r(t[o],i,n)}function o(t,r,o){function s(r,o){i(t,function(t){n(u,t),r&&n({success:r,error:o},t),e(c,t)},u)}var c,u;if(r&&r.trim&&(c=r),u=(c?o:r)||{},c){if(c in a)throw"LoadJS";a[c]=!0}if(u.returnPromise)return new Promise(s);s()}var s=function(){},a={},c={},u={};return o.ready=function(e,r){return t(e,function(t){n(r,t)}),o},o.done=function(t){e(t,[])},o.reset=function(){a={},c={},u={}},o.isDefined=function(t){return t in a},o})},vbq8:function(){}});
//# sourceMappingURL=route-class.page.chunk.a6d26.js.map